# Задача 1
**Ускорить простой запроc, добиться времени выполнения < 10ms**
```sql
select name from t1 where id = 50000;
```

## Решение
Для начала проверим, работает ли вообще этот запрос.
```sql
select name from t1 where id = 50000;
             name
-------------------------------
 0dc974df10e80e798c44bb0ff5e5c
(1 row)
```
Всё работает. Теперь посмотрим план запроса и статистику выполнения.
```sql
EXPLAIN ANALYZE select name from t1 where id = 50000;
                                             QUERY PLAN
----------------------------------------------------------------------------------------------------
 Seq Scan on t1  (cost=0.00..208392.44 rows=1 width=30) (actual time=6.458..850.878 rows=1 loops=1)
   Filter: (id = 50000)
   Rows Removed by Filter: 9999999
 Planning Time: 0.055 ms
 Execution Time: 850.893 ms
(5 rows)
```
Как можно заметить, здесь используется _последовательное сканирование_, что в нашем случае не является эффективным, ведь таблица `t1` достаточно большая (10 млн строк).\
\
Для оптимизации данного запроса используем индексы, но сначала проверим, есть ли они у нас.
```sql
select * from pg_indexes where tablename = 't1';
 schemaname | tablename | indexname | tablespace | indexdef
------------+-----------+-----------+------------+----------
(0 rows)
```
Как и ожидалось, какие-либо индексы отсутствуют.\
\
Так как в запросе участвуют только две колонки, предлагаю сделать покрывающий индекс.\
Он будет содержать все необходимые нам колонки, `id` для индексирования и `name`, значение которой будет выводиться в результате выполнения запроса.
```sql
create index t1_id_name on t1(id) include (name);
CREATE INDEX
```
Проверим результат наших действий.
```sql
EXPLAIN ANALYZE select name from t1 where id = 50000;
                                                     QUERY PLAN
---------------------------------------------------------------------------------------------------------------------
 Index Only Scan using t1_id_name on t1  (cost=0.43..8.45 rows=1 width=30) (actual time=0.451..0.452 rows=1 loops=1)
   Index Cond: (id = 50000)
   Heap Fetches: 0
 Planning Time: 1.354 ms
 Execution Time: 0.467 ms
(5 rows)
```
Время меньше 10 ms, а значит миссия выполнена.
